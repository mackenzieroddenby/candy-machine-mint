{"ast":null,"code":"import _objectSpread from\"C:/Users/kyz79/metaplex/candy-machine-mint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/kyz79/metaplex/candy-machine-mint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kyz79/metaplex/candy-machine-mint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/kyz79/metaplex/candy-machine-mint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/kyz79/metaplex/candy-machine-mint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import{useEffect,useState}from\"react\";import styled from\"styled-components\";import Countdown from\"react-countdown\";import{Button,CircularProgress,Snackbar}from\"@material-ui/core\";import Alert from\"@material-ui/lab/Alert\";import{LAMPORTS_PER_SOL}from\"@solana/web3.js\";import{useWallet}from\"@solana/wallet-adapter-react\";import{WalletDialogButton}from\"@solana/wallet-adapter-material-ui\";import{awaitTransactionSignatureConfirmation,getCandyMachineState,mintOneToken,shortenAddress}from\"./candy-machine\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ConnectButton=styled(WalletDialogButton)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));var CounterText=styled.span(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\"])));// add your styles here\nvar MintContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\"])));// add your styles here\nvar MintButton=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\"])));// add your styles here\nvar Home=function Home(props){var _wallet$publicKey;var _useState=useState(),_useState2=_slicedToArray(_useState,2),balance=_useState2[0],setBalance=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isActive=_useState4[0],setIsActive=_useState4[1];// true when countdown completes\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSoldOut=_useState6[0],setIsSoldOut=_useState6[1];// true when items remaining is zero\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isMinting=_useState8[0],setIsMinting=_useState8[1];// true when user got to press MINT\nvar _useState9=useState({open:false,message:\"\",severity:undefined}),_useState10=_slicedToArray(_useState9,2),alertState=_useState10[0],setAlertState=_useState10[1];var _useState11=useState(new Date(props.startDate)),_useState12=_slicedToArray(_useState11,2),startDate=_useState12[0],setStartDate=_useState12[1];var wallet=useWallet();var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),candyMachine=_useState14[0],setCandyMachine=_useState14[1];var onMint=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var mintTxId,status,message,_balance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setIsMinting(true);if(!(wallet.connected&&(candyMachine===null||candyMachine===void 0?void 0:candyMachine.program)&&wallet.publicKey)){_context.next=10;break;}_context.next=5;return mintOneToken(candyMachine,props.config,wallet.publicKey,props.treasury);case 5:mintTxId=_context.sent;_context.next=8;return awaitTransactionSignatureConfirmation(mintTxId,props.txTimeout,props.connection,\"singleGossip\",false);case 8:status=_context.sent;if(!(status===null||status===void 0?void 0:status.err)){setAlertState({open:true,message:\"Congratulations! Mint succeeded!\",severity:\"success\"});}else{setAlertState({open:true,message:\"Mint failed! Please try again!\",severity:\"error\"});}case 10:_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);// TODO: blech:\nmessage=_context.t0.msg||\"Minting failed! Please try again!\";if(!_context.t0.msg){if(_context.t0.message.indexOf(\"0x138\")){}else if(_context.t0.message.indexOf(\"0x137\")){message=\"SOLD OUT!\";}else if(_context.t0.message.indexOf(\"0x135\")){message=\"Insufficient funds to mint. Please fund your wallet.\";}}else{if(_context.t0.code===311){message=\"SOLD OUT!\";setIsSoldOut(true);}else if(_context.t0.code===312){message=\"Minting period hasn't started yet.\";}}setAlertState({open:true,message:message,severity:\"error\"});case 17:_context.prev=17;if(!(wallet===null||wallet===void 0?void 0:wallet.publicKey)){_context.next=23;break;}_context.next=21;return props.connection.getBalance(wallet===null||wallet===void 0?void 0:wallet.publicKey);case 21:_balance=_context.sent;setBalance(_balance/LAMPORTS_PER_SOL);case 23:setIsMinting(false);return _context.finish(17);case 25:case\"end\":return _context.stop();}}},_callee,null,[[0,12,17,25]]);}));return function onMint(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _balance2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(wallet===null||wallet===void 0?void 0:wallet.publicKey)){_context2.next=5;break;}_context2.next=3;return props.connection.getBalance(wallet.publicKey);case 3:_balance2=_context2.sent;setBalance(_balance2/LAMPORTS_PER_SOL);case 5:case\"end\":return _context2.stop();}}},_callee2);}))();},[wallet,props.connection]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var anchorWallet,_yield$getCandyMachin,candyMachine,goLiveDate,itemsRemaining;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(!wallet||!wallet.publicKey||!wallet.signAllTransactions||!wallet.signTransaction)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:anchorWallet={publicKey:wallet.publicKey,signAllTransactions:wallet.signAllTransactions,signTransaction:wallet.signTransaction};_context3.next=5;return getCandyMachineState(anchorWallet,props.candyMachineId,props.connection);case 5:_yield$getCandyMachin=_context3.sent;candyMachine=_yield$getCandyMachin.candyMachine;goLiveDate=_yield$getCandyMachin.goLiveDate;itemsRemaining=_yield$getCandyMachin.itemsRemaining;setIsSoldOut(itemsRemaining===0);setStartDate(goLiveDate);setCandyMachine(candyMachine);case 12:case\"end\":return _context3.stop();}}},_callee3);}))();},[wallet,props.candyMachineId,props.connection]);return/*#__PURE__*/_jsxs(\"main\",{children:[wallet.connected&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Address: \",shortenAddress(((_wallet$publicKey=wallet.publicKey)===null||_wallet$publicKey===void 0?void 0:_wallet$publicKey.toBase58())||\"\")]}),wallet.connected&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Balance: \",(balance||0).toLocaleString(),\" SOL\"]}),/*#__PURE__*/_jsx(MintContainer,{children:!wallet.connected?/*#__PURE__*/_jsx(ConnectButton,{children:\"Connect Wallet\"}):/*#__PURE__*/_jsx(MintButton,{disabled:isSoldOut||isMinting||!isActive,onClick:onMint,variant:\"contained\",children:isSoldOut?\"SOLD OUT\":isActive?isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):\"MINT\":/*#__PURE__*/_jsx(Countdown,{date:startDate,onMount:function onMount(_ref4){var completed=_ref4.completed;return completed&&setIsActive(true);},onComplete:function onComplete(){return setIsActive(true);},renderer:renderCounter})})}),/*#__PURE__*/_jsx(Snackbar,{open:alertState.open,autoHideDuration:6000,onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},children:/*#__PURE__*/_jsx(Alert,{onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},severity:alertState.severity,children:alertState.message})})]});};var renderCounter=function renderCounter(_ref5){var days=_ref5.days,hours=_ref5.hours,minutes=_ref5.minutes,seconds=_ref5.seconds,completed=_ref5.completed;return/*#__PURE__*/_jsxs(CounterText,{children:[hours,\" hours, \",minutes,\" minutes, \",seconds,\" seconds\"]});};export default Home;","map":{"version":3,"sources":["C:/Users/kyz79/metaplex/candy-machine-mint/src/Home.tsx"],"names":["useEffect","useState","styled","Countdown","Button","CircularProgress","Snackbar","Alert","LAMPORTS_PER_SOL","useWallet","WalletDialogButton","awaitTransactionSignatureConfirmation","getCandyMachineState","mintOneToken","shortenAddress","ConnectButton","CounterText","span","MintContainer","div","MintButton","Home","props","balance","setBalance","isActive","setIsActive","isSoldOut","setIsSoldOut","isMinting","setIsMinting","open","message","severity","undefined","alertState","setAlertState","Date","startDate","setStartDate","wallet","candyMachine","setCandyMachine","onMint","connected","program","publicKey","config","treasury","mintTxId","txTimeout","connection","status","err","msg","indexOf","code","getBalance","signAllTransactions","signTransaction","anchorWallet","candyMachineId","goLiveDate","itemsRemaining","toBase58","toLocaleString","completed","renderCounter","days","hours","minutes","seconds"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Countdown from \"react-countdown\";\r\nimport { Button, CircularProgress, Snackbar } from \"@material-ui/core\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport * as anchor from \"@project-serum/anchor\";\r\n\r\nimport { LAMPORTS_PER_SOL } from \"@solana/web3.js\";\r\n\r\nimport { useWallet } from \"@solana/wallet-adapter-react\";\r\nimport { WalletDialogButton } from \"@solana/wallet-adapter-material-ui\";\r\n\r\nimport {\r\n  CandyMachine,\r\n  awaitTransactionSignatureConfirmation,\r\n  getCandyMachineState,\r\n  mintOneToken,\r\n  shortenAddress,\r\n} from \"./candy-machine\";\r\n\r\nconst ConnectButton = styled(WalletDialogButton)``;\r\n\r\nconst CounterText = styled.span``; // add your styles here\r\n\r\nconst MintContainer = styled.div``; // add your styles here\r\n\r\nconst MintButton = styled(Button)``; // add your styles here\r\n\r\nexport interface HomeProps {\r\n  candyMachineId: anchor.web3.PublicKey;\r\n  config: anchor.web3.PublicKey;\r\n  connection: anchor.web3.Connection;\r\n  startDate: number;\r\n  treasury: anchor.web3.PublicKey;\r\n  txTimeout: number;\r\n}\r\n\r\nconst Home = (props: HomeProps) => {\r\n  const [balance, setBalance] = useState<number>();\r\n  const [isActive, setIsActive] = useState(false); // true when countdown completes\r\n  const [isSoldOut, setIsSoldOut] = useState(false); // true when items remaining is zero\r\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\r\n\r\n  const [alertState, setAlertState] = useState<AlertState>({\r\n    open: false,\r\n    message: \"\",\r\n    severity: undefined,\r\n  });\r\n\r\n  const [startDate, setStartDate] = useState(new Date(props.startDate));\r\n\r\n  const wallet = useWallet();\r\n  const [candyMachine, setCandyMachine] = useState<CandyMachine>();\r\n\r\n  const onMint = async () => {\r\n    try {\r\n      setIsMinting(true);\r\n      if (wallet.connected && candyMachine?.program && wallet.publicKey) {\r\n        const mintTxId = await mintOneToken(\r\n          candyMachine,\r\n          props.config,\r\n          wallet.publicKey,\r\n          props.treasury\r\n        );\r\n\r\n        const status = await awaitTransactionSignatureConfirmation(\r\n          mintTxId,\r\n          props.txTimeout,\r\n          props.connection,\r\n          \"singleGossip\",\r\n          false\r\n        );\r\n\r\n        if (!status?.err) {\r\n          setAlertState({\r\n            open: true,\r\n            message: \"Congratulations! Mint succeeded!\",\r\n            severity: \"success\",\r\n          });\r\n        } else {\r\n          setAlertState({\r\n            open: true,\r\n            message: \"Mint failed! Please try again!\",\r\n            severity: \"error\",\r\n          });\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      // TODO: blech:\r\n      let message = error.msg || \"Minting failed! Please try again!\";\r\n      if (!error.msg) {\r\n        if (error.message.indexOf(\"0x138\")) {\r\n        } else if (error.message.indexOf(\"0x137\")) {\r\n          message = `SOLD OUT!`;\r\n        } else if (error.message.indexOf(\"0x135\")) {\r\n          message = `Insufficient funds to mint. Please fund your wallet.`;\r\n        }\r\n      } else {\r\n        if (error.code === 311) {\r\n          message = `SOLD OUT!`;\r\n          setIsSoldOut(true);\r\n        } else if (error.code === 312) {\r\n          message = `Minting period hasn't started yet.`;\r\n        }\r\n      }\r\n\r\n      setAlertState({\r\n        open: true,\r\n        message,\r\n        severity: \"error\",\r\n      });\r\n    } finally {\r\n      if (wallet?.publicKey) {\r\n        const balance = await props.connection.getBalance(wallet?.publicKey);\r\n        setBalance(balance / LAMPORTS_PER_SOL);\r\n      }\r\n      setIsMinting(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (wallet?.publicKey) {\r\n        const balance = await props.connection.getBalance(wallet.publicKey);\r\n        setBalance(balance / LAMPORTS_PER_SOL);\r\n      }\r\n    })();\r\n  }, [wallet, props.connection]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (\r\n        !wallet ||\r\n        !wallet.publicKey ||\r\n        !wallet.signAllTransactions ||\r\n        !wallet.signTransaction\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      const anchorWallet = {\r\n        publicKey: wallet.publicKey,\r\n        signAllTransactions: wallet.signAllTransactions,\r\n        signTransaction: wallet.signTransaction,\r\n      } as anchor.Wallet;\r\n\r\n      const { candyMachine, goLiveDate, itemsRemaining } =\r\n        await getCandyMachineState(\r\n          anchorWallet,\r\n          props.candyMachineId,\r\n          props.connection\r\n        );\r\n\r\n      setIsSoldOut(itemsRemaining === 0);\r\n      setStartDate(goLiveDate);\r\n      setCandyMachine(candyMachine);\r\n    })();\r\n  }, [wallet, props.candyMachineId, props.connection]);\r\n\r\n  return (\r\n    <main>\r\n      {wallet.connected && (\r\n        <p>Address: {shortenAddress(wallet.publicKey?.toBase58() || \"\")}</p>\r\n      )}\r\n\r\n      {wallet.connected && (\r\n        <p>Balance: {(balance || 0).toLocaleString()} SOL</p>\r\n      )}\r\n\r\n      <MintContainer>\r\n        {!wallet.connected ? (\r\n          <ConnectButton>Connect Wallet</ConnectButton>\r\n        ) : (\r\n          <MintButton\r\n            disabled={isSoldOut || isMinting || !isActive}\r\n            onClick={onMint}\r\n            variant=\"contained\"\r\n          >\r\n            {isSoldOut ? (\r\n              \"SOLD OUT\"\r\n            ) : isActive ? (\r\n              isMinting ? (\r\n                <CircularProgress />\r\n              ) : (\r\n                \"MINT\"\r\n              )\r\n            ) : (\r\n              <Countdown\r\n                date={startDate}\r\n                onMount={({ completed }) => completed && setIsActive(true)}\r\n                onComplete={() => setIsActive(true)}\r\n                renderer={renderCounter}\r\n              />\r\n            )}\r\n          </MintButton>\r\n        )}\r\n      </MintContainer>\r\n\r\n      <Snackbar\r\n        open={alertState.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setAlertState({ ...alertState, open: false })}\r\n      >\r\n        <Alert\r\n          onClose={() => setAlertState({ ...alertState, open: false })}\r\n          severity={alertState.severity}\r\n        >\r\n          {alertState.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </main>\r\n  );\r\n};\r\n\r\ninterface AlertState {\r\n  open: boolean;\r\n  message: string;\r\n  severity: \"success\" | \"info\" | \"warning\" | \"error\" | undefined;\r\n}\r\n\r\nconst renderCounter = ({ days, hours, minutes, seconds, completed }: any) => {\r\n  return (\r\n    <CounterText>\r\n      {hours} hours, {minutes} minutes, {seconds} seconds\r\n    </CounterText>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}